FROM node:18

WORKDIR /app
COPY . .

# 避免 rollup 加载 native 模块
ENV ROLLUP_NO_NATIVE=true

# 使用 npm 更稳定（也可替换为 pnpm）
RUN rm -rf node_modules package-lock.json && \
    npm cache clean --force && \
    npm install --legacy-peer-deps

CMD ["npm", "run", "dev"]
